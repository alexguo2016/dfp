参考书: Vue.js权威指南
## 组件的核心 ##
### 模版 template ###
声明了数据和最终展现给用户的DOM之间的映射关系  
### 初始数据 data ###
一个组件的初始数据状态, 通常是私有的状态
### 接收的外部参数props ###
组件之间通过参数 来进行数据的传递和共享, 参数默认是单向绑定(由上而下), 但也可以显式声明为双向绑定
### 方法 methods ###
对数据改动操作一般都在组件的方法内进行, 可以通过 <b>v-on</b> 指令将用户输入事件和组件方法进行绑定
### 生命周期钩子函数 ###
一个组件会触发多个生命周期钩子函数, 例如created, attached等等, 与传统的MVC对比, 可以理解为Controler的逻辑被分散到这些钩子函数中

---

## 基础 ##
### 注册 ###
如果需要注册一个全局都可以使用的vue组件, 可以这样
```javascript
Vue.component('nameOfCom', {'组件内容'})
```
组件内容可以是一个构造函数, 也可以是Object  
如果是构造函数, 可以这样写
```javascript
Vue.component('nameOfCom', {myCom})
var myCom = Vue.extend({
    //组件内容
})
```
如果是Object, 则和直接使用Vue差不多, 例如
```javascript
Vue.component('nameOfCom', ({
    //组件内容
}))
```
这样就可以在HTML中使用组件
```html
<nameOfCom></nameOfCom>
```
例子如下
```html
<body>
    <div id="app1">
        <myCom></myCom>
    </div>
    <script type="text/javascript">
        Vue.component('myCom', {
            template: `
                <div>my first component</div>
            `
        })
        var app1 = new Vue({
            el: '#app1',
        })
    </script>
</body>
```
### 局部注册 ###
事实上, 不需要所有组件都是全局组件, 可以让组件只能用在其他组件内, 可以使用实例选项cmoponents注册

## 数据传递 ##
Vue.js组件之间有三种数据传递的方式
- props
- 组件通信
- slot

### props ###  
是组件数据的一个字段, 期望从父组件传下来数据. 子组件需要显式地调用props选项来获取父组件的数据, props可以是字面量, 也可以说表达式, 还可以 绑定修饰符  
```javascript
Vue.component('child', {
    props: ['msg'],
    template: '<span>{{msg}}</span>'
    })
```
```html
<div class="" id = 'app2'>
    <child msg='myName'></child>
</div>
```
需要注意的是, HTML特性不区分大小写, 如果名字为camelCase的props用作特性是, 需要转换为短划线隔开形式, camel-case  

动态语法  
我们也可以用v-bind动态地将props绑定到父组件的数据, 当父组件的数据变化是, 该变化 也会传导给子组件
```javascript
var Child = Vue.extend({
    props: ['childProps'],
    template: '<div> {{childProps}} is shown</div>',
    replace: true
})

var Parent = Vue.extend({
    template: `
    <div>
        <p>i am parent</p>
        <br>
        <child :child-props="hello"></child>
    </div>
    `,
    data: function() {
        return {'hello': 'hello yatte,'}
    },
    components: {
        'child': Child,
    }
})

var app3 = new Vue({
    el: '#app3',
    components: {
        'parent-comp': Parent
    }
})
```

绑定修饰符  
props默认是单向绑定的, 当父组件的相应属性发生变化时, 将props传导给子组件, 但是不会反过来, 这是为了房子子组件无意之中修改父组件的状态, 使应用的数据流难以理解, 如果真的有双向流通的必要, 可以使用绑定修饰符:
- .sync, 双向绑定
- .once, 单次绑定

双向绑定  
```html
<child :msg.sync='parentMsg'></child>
```
单次绑定
```html
<child :msg.once='parentMsg'></child>
```
示例代码如下:
```html
<div id = 'app4'>
    <input type="text" v-model = 'info.name'>
    <info v-bind:msg.sync='info'></info>
</div>
<script type="text/javascript">
    var app4 = new Vue({
        el: '#app4',
        data: function() {
            return {
                info: {
                    name: '你的快递'
                }
            }
        },
        components: {
            'info': {
                props: ['msg'],
                template: `
                    <div>{{ msg.name }}</div>
                `
            }
        }
    })
</script>
```
props验证  

组件可以为props指定验证要求, 确保组件被正确使用. 此时props的值是一个对象, 示例代码如下:
```javascript
Vue.component('example', {
    props: {
        propA: 'null',
        //可以是基础类型, 如果是null, 代表可以是所有类型
        propB: [String, Number],
        //可以是String或者Number
        propC: {
            type: String,
            required: true
        },
        //必须传入而且必须是字符串
        propC: {
            type: Number,
            default: 200
        },
        //数字, 默认值为200
        propD: {
            type: Object,
            default: function() {
                return { msg: 'hello' }
            }
        },
        //对象或者数组, 默认值应该由一个函数返回
        propE: {
            twoWay: true
        },
        //绑定的这个prop为双向绑定, 如果绑定类型不对, 将抛出一条警告
        propF: {
            validator: function(value) {
                return value > 10
            }
        },
        //自定义的验证函数

    }
})
```
prop转换函数  

可以给prop定义一个coerce函数, 当prop在父类更新的时候, prop的值将被函数处理, 可以理解为prop的单向过滤器, 只是它被定义在子组件内.  
```javascript
Vue.Component('example2', {
    props: {
        //在设置值之前转换值
        propG: {
            coerce: function(val) {
                renturn val + ''
                //将数值转换为字符串
            }
        }
    }
})
```
props, propsData, data  

props用于父子组件之间的数据传递, data用于开发组件或者实例化Vue对象时候作为私有数据存在, propsData则用来在组件初始化后覆盖props中的属性  

### 组件通信 ###
组件之间可以使用一些实例属性来相互访问, 例如子组件可以使用this.$parent访问它的父组件, 父组件有一个数组this.$children保存所有的子元素, 根实例的后代可以使用this.$root来访问根实例  
在子组件中修改父组件的状态是非常不好的做法  
一般来说, 应该使用事件传递的方式, Vue实例是一个事件触发器, 有如下的方法  
- $on()--监听事件
- $emit()--把事件沿着作用域链向上派送
- $dispatch()--派发事件, 事件沿父链冒泡
- $broadcast()--广播事件, 事件向下传导给所有后代, 所有的

vue的组件通信和DOM并不同, 有独立的接口和方式
